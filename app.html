<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="Author" content="Laurent LYAUDET">
  <meta name="Publisher" content="Laurent LYAUDET">
  <meta name="Description" content="Dev tool to generate a regular expression matching a range of decimal numbers">
  <meta name="Keywords" content="RegExp, regular expression, generator, decimal number, min, max, step">
  <title>DecimalsRangeRegexpGenerator</title>
</head>
<body>
  <!--
  This file is part of DecimalsRangeRegexpGenerator.

  DecimalsRangeRegexpGenerator is free software:
  you can redistribute it and/or modify it
  under the terms of the GNU Affero General Public License
  as published by the Free Software Foundation,
  either version 3 of the License, or (at your option) any later version.

  DecimalsRangeRegexpGenerator is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  See the GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License along with DecimalsRangeRegexpGenerator.
  If not, see <https://www.gnu.org/licenses/>

  ©Copyright 2022 Laurent Lyaudet
  -->
  <h1>DecimalsRangeRegexpGenerator</h1>

  <form>
    <h4>Main parameters</h4>
    <h5>They impact the decimal numbers that can be written.</h5>
    <div>
      <label for="min">Min (optional): </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="\d+(\.\d+)?"
        id="min"
        name="min"
      >
    </div>
    <div>
      <label for="is_min_excluded">Min excluded: </label>
      <input
        type="checkbox"
        value="1"
        id="is_min_excluded"
        name="is_min_excluded"
      >
    </div>
    <div>
      <label for="max">Max (optional): </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="\d+(\.\d+)?"
        id="max"
        name="max"
      >
    </div>
    <div>
      <label for="is_max_excluded">Max excluded: </label>
      <input
        type="checkbox"
        value="1"
        id="is_max_excluded"
        name="is_max_excluded"
      >
    </div>
    <div>
      <label for="step">Step (optional, it will default to arbitrary precision and not 1): </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="\d+(\.\d+)?"
        id="step"
        name="step"
      >
    </div>

    <hr>

    <h4>More optional parameters</h4>
    <h5>They impact the formatting of the decimal numbers that can be written.</h5>
    <div>
      <label for="allow_leading_zeros">Allow leading zeros: </label>
      <input
        type="checkbox"
        value="1"
        id="allow_leading_zeros"
        name="allow_leading_zeros"
      >
    </div>
    <div>
      <label for="allow_trailing_zeros">Allow trailing zeros: </label>
      <input
        type="checkbox"
        value="1"
        id="allow_trailing_zeros"
        name="allow_trailing_zeros"
      >
    </div>
    <div>
      <label for="decimal_separators">
        Decimal separators
        (A string that defaults to "."; you may use "," or ".," for example,
        but decimal digits are forbidden ;).)
      </label>
      <input
        type="text"
        inputmode="text"
        pattern="\D+"
        id="decimal_separators"
        name="decimal_separators"
      >
    </div>
    <div>
      <label for="min_number_of_digits_before_decimal_separator">Min number of digits before decimal separator: </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="[1-9]\d*"
        id="min_number_of_digits_before_decimal_separator"
        name="min_number_of_digits_before_decimal_separator"
      >
    </div>
    <div>
      <label for="max_number_of_digits_before_decimal_separator">Max number of digits before decimal separator: </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="[1-9]\d*"
        id="max_number_of_digits_before_decimal_separator"
        name="max_number_of_digits_before_decimal_separator"
      >
    </div>
    <div>
      <label for="min_number_of_digits_after_decimal_separator">Min number of digits after decimal separator: </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="[1-9]\d*"
        id="min_number_of_digits_after_decimal_separator"
        name="min_number_of_digits_after_decimal_separator"
      >
    </div>
    <div>
      <label for="max_number_of_digits_after_decimal_separator">Max number of digits after decimal separator: </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="[1-9]\d*"
        id="max_number_of_digits_after_decimal_separator"
        name="max_number_of_digits_after_decimal_separator"
      >
    </div>
    <div>
      <label for="min_number_of_digits">Min number of digits before or after decimal separator: </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="[1-9]\d*"
        id="min_number_of_digits"
        name="min_number_of_digits"
      >
    </div>
    <div>
      <label for="max_number_of_digits">Max number of digits before or after decimal separator: </label>
      <input
        type="text"
        inputmode="numeric"
        pattern="[1-9]\d*"
        id="max_number_of_digits"
        name="max_number_of_digits"
      >
    </div>
    <div>
      <label for="allow_zero_with_minus">Allow zero to be written with a minus sign: </label>
      <input
        type="checkbox"
        value="1"
        id="allow_zero_with_minus"
        name="allow_zero_with_minus"
      >
    </div>
    <div>
      <label for="allow_zero_with_plus">Allow zero to be written with a plus sign: </label>
      <input
        type="checkbox"
        value="1"
        id="allow_zero_with_plus"
        name="allow_zero_with_plus"
      >
    </div>
    <div>
      <label for="allow_positive_number_with_plus">Allow numbers above zero to be written with a plus sign: </label>
      <input
        type="checkbox"
        value="1"
        id="allow_positive_number_with_plus"
        name="allow_positive_number_with_plus"
      >
    </div>

    <hr>

    <button type="submit">Generate (Not Implemented Yet)</button>
  </form>

  <hr>
  <h4>Error message</h4>
  <div id="error" style="color: red;"></div>

  <hr>
  <h4>Result</h4>
  <div>
    <textarea id="result"></textarea>
  </div>

  <br>
  <br>
  <hr>

  ©Copyright 2022 Laurent Lyaudet
  <br>
  GNU AGPL : this HTML file you're currently viewing must contain all the source code,
  other files of the repository should be <a href=".">here</a>,
  or on GitHub <a href="https://github.com/LLyaudet/DecimalsRangeRegexpGenerator">here</a>.

  <script>
    "use strict";
    const url_search_params = new URLSearchParams(window.location.search);
    let parameters = {
      min: "",
      is_min_excluded: false,
      max: "",
      is_max_excluded: false,
      step: "",
      allow_leading_zeros: false,
      allow_trailing_zeros: false,
      decimal_separators: "",
      min_number_of_digits_before_decimal_separator: null,
      max_number_of_digits_before_decimal_separator: null,
      min_number_of_digits_after_decimal_separator: null,
      max_number_of_digits_after_decimal_separator: null,
      min_number_of_digits: "",
      max_number_of_digits: "",
      allow_zero_with_minus: false,
      allow_zero_with_plus: false,
      allow_positive_number_with_plus: false,
    };
    let error_message = "";

    function set_text_parameter_in_form(parameter_name){
      if(
        url_search_params.get(parameter_name) !== undefined
        && url_search_params.get(parameter_name) !== null
      ){
        document.getElementById(parameter_name).value = url_search_params.get(parameter_name);
        parameters[parameter_name] = url_search_params.get(parameter_name);
      }
    }

    function set_checkbox_parameter_in_form(parameter_name){
      if(url_search_params.get(parameter_name) === "1"){
        document.getElementById(parameter_name).checked = true;
        parameters[parameter_name] = true;
      }
    }

    function set_positive_integer_parameter_in_form(parameter_name){
      if(
        url_search_params.get(parameter_name) !== undefined
        && url_search_params.get(parameter_name) !== null
      ){
        document.getElementById(parameter_name).value = url_search_params.get(parameter_name);
        if(url_search_params.get(parameter_name) === ""){
          parameters[parameter_name] = null;
        }
        else{
          if(
            url_search_params.get(parameter_name)
            === Math.abs(parseInt(url_search_params.get(parameter_name))).toString()
          ){
            parameters[parameter_name] = parseInt(url_search_params.get(parameter_name));
          }
          else{
            error_message += (
              "Value \"" + url_search_params.get(parameter_name) + "\""
              + " for " + parameter_name + " is incorrect (probably too big).\n"
            );
          }
        }
      }
    }

    set_text_parameter_in_form("min");
    set_checkbox_parameter_in_form("is_min_excluded");
    set_text_parameter_in_form("max");
    set_checkbox_parameter_in_form("is_max_excluded");
    set_text_parameter_in_form("step");
    set_checkbox_parameter_in_form("allow_leading_zeros");
    set_checkbox_parameter_in_form("allow_trailing_zeros");
    set_text_parameter_in_form("decimal_separators");
    if(parameters.decimal_separators === ""){
      parameters.decimal_separators = ".";
    }
    set_positive_integer_parameter_in_form("min_number_of_digits_before_decimal_separator");
    set_positive_integer_parameter_in_form("max_number_of_digits_before_decimal_separator");
    set_positive_integer_parameter_in_form("min_number_of_digits_after_decimal_separator");
    set_positive_integer_parameter_in_form("max_number_of_digits_after_decimal_separator");
    set_positive_integer_parameter_in_form("min_number_of_digits");
    set_positive_integer_parameter_in_form("max_number_of_digits");
    set_checkbox_parameter_in_form("allow_zero_with_minus");
    set_checkbox_parameter_in_form("allow_zero_with_plus");
    set_checkbox_parameter_in_form("allow_leading_zeros");
    set_checkbox_parameter_in_form("allow_positive_number_with_plus");

    if(error_message !== ""){
      document.getElementById("error").innerHTML = error_message;
    }

  </script>
</body>
</html>
